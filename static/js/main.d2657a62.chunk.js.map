{"version":3,"sources":["components/Airtable.js","App.js","index.js"],"names":["Airtable","AirtableClient","apiKey","base","App","useState","tracking","setTracking","data","setData","getNumber","string","parseInt","match","getData","a","options","view","filterByFormula","tracking_number","select","all","result","length","keys","Object","fields","filter","key","includes","sort","b","latest","newData","x","push","date","stage","className","type","placeholder","onChange","e","target","value","onClick","map","res","index","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mOAIeA,EAFE,I,OAAIC,GAAe,CAAEC,OAAQ,sBAAuBC,KAAK,qB,gBCsE3DC,MApEf,WACE,MAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAwBF,mBAAS,CAAEG,KAAM,KAAzC,mBAAOA,EAAP,KAAaC,EAAb,KAEMC,EAAY,SAACC,GACjB,OAAOC,SAASD,EAAOE,MAAM,QAAQ,KAGjCC,EAAO,uCAAG,wCAAAC,EAAA,6DAERC,EAAU,CACdC,KAAM,YACNC,gBAAgB,oBAAD,OAHXC,EAAkBb,EAGP,MAJH,SAMON,EAAS,YAAYoB,OAAOJ,GAASK,MAN5C,UAQQ,KAFhBC,EANQ,QAQHC,OARG,iDAoBd,IARMC,EAAOC,OAAOD,KAAKF,EAAO,GAAGI,QAChCC,QAAO,SAAAC,GAAG,OAAIA,EAAIC,SAAS,YAC3BC,MAAK,SAACf,EAAGgB,GAAJ,OAAUrB,EAAUqB,GAAKrB,EAAUK,MAErCiB,EAAStB,EAAUc,EAAK,IAExBS,EAAU,CAAEd,kBAAiBX,KAAM,IAEhC0B,EAAIF,EAAQE,GAAK,EAAGA,IAC3BD,EAAQzB,KAAK2B,KAAK,CAChBC,KAAMd,EAAO,GAAGI,OAAV,eAAyBQ,IAC/BG,MAAOf,EAAO,GAAGI,OAAV,gBAA0BQ,MAIrCzB,EAAQwB,GA3BM,4CAAH,qDAkCb,OACE,qBAAKK,UAAU,MAAf,SACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,uBAAOC,KAAK,OAAOC,YAAY,yIAA2BF,UAAU,iBAAiBG,SARnE,SAAAC,GACxBnC,EAAYmC,EAAEC,OAAOC,UAQf,wBAAQL,KAAK,SAASD,UAAU,gBAAgBO,QAAS/B,EAAzD,+CAEDN,EAAKA,KAAKe,OAAS,EAClB,sBAAKe,UAAU,mBAAf,UACE,oBAAIA,UAAU,QAAd,4EACA,oBAAGA,UAAU,YAAb,4HAA+C9B,EAAKW,mBACpD,qBAAKmB,UAAU,UAAf,SACG9B,EAAKA,KAAKsC,KAAI,SAACC,EAAKC,GAAN,OACb,sBAAKV,UAAS,iBAAYU,EAAQ,IAAM,EAAI,QAAU,IAAtD,UACE,mBAAGV,UAAU,OAAb,SAAqBS,EAAIX,OACzB,mBAAGE,UAAU,SAAb,SAAuBS,EAAIV,UAFoCW,WAOrE,WC9DZC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.d2657a62.chunk.js","sourcesContent":["import AirtableClient from 'airtable';\n\nconst Airtable = new AirtableClient({ apiKey: 'keyUd36hCP5Mk7yK2' }).base('appjwctbIDtbNXYea');\n\nexport default Airtable;","import { useState } from 'react';\nimport Airtable from './components/Airtable';\nimport './App.css';\n\nfunction App() {\n  const [tracking, setTracking] = useState('');\n  const [data, setData] = useState({ data: [] });\n\n  const getNumber = (string) => {\n    return parseInt(string.match(/\\d+/g)[0]);\n  };\n\n  const getData = async () => {\n    const tracking_number = tracking;\n    const options = {\n      view: \"Grid view\",\n      filterByFormula: `tracking_number='${tracking_number}'`\n    };\n    const result = await Airtable('Tracking').select(options).all();\n\n    if (result.length === 0) {\n      return;\n    }\n\n    const keys = Object.keys(result[0].fields)\n      .filter(key => key.includes('date_'))\n      .sort((a, b) => getNumber(b) - getNumber(a));\n\n    const latest = getNumber(keys[0]);\n\n    const newData = { tracking_number, data: [] };\n\n    for (let x = latest; x >= 1; x--) {\n      newData.data.push({\n        date: result[0].fields[`date_${x}`],\n        stage: result[0].fields[`stage_${x}`]\n      })\n    }\n\n    setData(newData);\n  };\n\n  const handleInputChange = e => {\n    setTracking(e.target.value);\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"button-wrapper\">\n          <input type=\"text\" placeholder=\"Введите код отслеживания\" className=\"input-tracking\" onChange={handleInputChange} />\n          <button type=\"button\" className=\"search-button\" onClick={getData}>Найти</button>\n        </div>\n        {data.data.length > 0 ? (\n          <div className=\"result-container\">\n            <h1 className=\"title\">Добрый день,</h1>\n            <p className=\"sub-title\">Ваш код отслеживания {data.tracking_number}</p>\n            <div className=\"results\">\n              {data.data.map((res, index) => (\n                <div className={`result ${index % 2 === 1 ? 'white' : ''}`} key={index}>\n                  <p className=\"date\">{res.date}</p>\n                  <p className=\"status\">{res.stage}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}